<ion-header class="top--box">
    <ion-navbar>
        <button ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>
            <ion-searchbar class="search--input" debounce="1000" (ionInput)="parameter.currentPage=1;getList()" [(ngModel)]="parameter.object_name" placeholder="请输入关键字">
            </ion-searchbar>
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>
    <div class="item--count--box">
        <!-- <ion-list radio-group [(ngModel)]="parameter.docbase" (ionChange)="parameter.parentId=0;parameter.currentPage=1;getList()">
            <ion-item>
                <ion-label>企业文档库</ion-label>
                <ion-radio value="wison_company" checked></ion-radio>
            </ion-item>
            <ion-item>
                <ion-label>项目文档库</ion-label>
                <ion-radio value="wison_projects"></ion-radio>
            </ion-item>

        </ion-list> -->
        <!-- <button (click)="fullSearch()" ion-button full>搜索</button>                        -->

        <span class="item--count">共{{parameter.totalCount}}个文件</span>
    </div>       
    <div *ngIf="searchResults.length == 0">
        无数据
    </div>

    <div *ngIf="searchResults.length > 0">
        <ion-list>
            <ion-item class="single--item--box" *ngFor="let searchResult of searchResults" (click)="itemSelected(searchResult)">
                <ion-avatar item-start>
                    <img onerror="this.src='assets/images/icon/unknown.png'" class="data--list--doc--icon" *ngIf="searchResult.r_object_type != 'wison_prj_document'  && searchResult.r_object_type != 'wison_document' && !searchResult.a_content_type"
                        src="assets/images/icon/{{searchResult.r_object_type}}.png" alt="">
                    <img onerror="this.src='assets/images/icon/unknown.png'" class="data--list--doc--icon" *ngIf="(searchResult.r_object_type == 'wison_prj_document' || searchResult.r_object_type == 'wison_document') && searchResult.a_content_type"
                        src="assets/images/icon/{{searchResult.a_content_type}}.png" alt="">
                    <img class="data--list--doc--icon" *ngIf="(searchResult.r_object_type == 'wison_prj_document' || searchResult.r_object_type == 'wison_document') && !searchResult.a_content_type"
                        src="assets/images/icon/unknown.png" alt="">
                </ion-avatar>
                <h2 class="object--name">
                    {{searchResult.object_name}}
                    <span style="float: right;" (click)="$event.stopPropagation();checkAttr(searchResult)">
                        <ion-icon name="eye"></ion-icon>
                    </span>
                </h2>

                <p [innerHTML]="searchResult.a_status"></p>
            </ion-item>
        </ion-list>

        <ion-infinite-scroll (ionInfinite)="changePage($event)">
            <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>
    </div>

</ion-content>